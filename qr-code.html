<html lang="en" id="oben">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <meta name="description" content="Sitterwerk Katalog Verfahren">
    <title>QR-Code</title>
    <script src="https://kit.fontawesome.com/9bcefde80d.js" crossorigin="anonymous"></script>
       <!-- Bootstrap CSS -->
       <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
   
    <link href="CSS/style_main.css" rel="stylesheet">

    <link rel="icon" type="image/png" href="">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,900&display=swap" rel="stylesheet">
    <script src="Javascript/java_main.js"></script>
    <script   src="https://code.jquery.com/jquery-3.6.0.slim.js"   integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY="   crossorigin="anonymous"></script>
    <script src="https://rawgit.com/sitepoint-editors/jsqrcode/master/src/qr_packed.js"></script>
</head>




  <style>
 
  

  
 </style>

  <body>
    <section class="section-2">
      <p class="pLogo-3">SITTERWERK </p>
      <p class="pLogo-4">KATALOG </p>
    </section>
         
    
    <main>
      <div class="qr-section">
    <div id="container">
      <h1>QR Code</h1>
      <h2>Scanner</h2>
<div class="middleqr">
      <a id="btn-scan-qr">
        <img class=""src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/07/1499401426qr_icon.svg">
      </a>

      <canvas hidden="" id="qr-canvas"></canvas>

      <div id="qr-result" hidden="">
        <b>Data:</b> <span id="outputData"></span>
      </div>
    </div>
    <h3>Schalten Sie Ihre Kamera ein.</h3>
    </div>
  </div>
  </main>

  <footer class="site-footer">
       
    <div class="container-footer">
    <button onclick="goBack()" class="thirdBtnqr xtrap"><img class="arrowBack"src="img/arrow_back.svg" width="29" height="11" alt="arrowback"></button>
      <a class="thirdBtn xtrapadding" href="index.html">info</a>
    </div>
   
    
</footer>


    <script src="qrCodeScanner.js"></script>
    <script>//const qrcode = window.qrcode;

        const video = document.createElement("video");
        const canvasElement = document.getElementById("qr-canvas");
        const canvas = canvasElement.getContext("2d");
        
        const qrResult = document.getElementById("qr-result");
        const outputData = document.getElementById("outputData");
        const btnScanQR = document.getElementById("btn-scan-qr");
        
        let scanning = false;
        
        qrcode.callback = res => {
          if (res) {
            outputData.innerText = res;
            scanning = false;
        
            video.srcObject.getTracks().forEach(track => {
              track.stop();
            });
        
            qrResult.hidden = false;
            canvasElement.hidden = true;
            btnScanQR.hidden = false;
          }
        };
        
        btnScanQR.onclick = () => {
          navigator.mediaDevices
            .getUserMedia({ video: { facingMode: "environment" } })
            .then(function(stream) {
              scanning = true;
              qrResult.hidden = true;
              btnScanQR.hidden = true;
              canvasElement.hidden = false;
              video.setAttribute("playsinline", true); // required to tell iOS safari we don't want fullscreen
              video.srcObject = stream;
              video.play();
              tick();
              scan();
            });
        };
        
        function tick() {
          canvasElement.height = video.videoHeight;
          canvasElement.width = video.videoWidth;
          canvas.drawImage(video, 0, 0, canvasElement.width, canvasElement.height);
        
          scanning && requestAnimationFrame(tick);
        }
        
        function scan() {
          try {
            qrcode.decode();
          } catch (e) {
            setTimeout(scan, 300);
          }
        };
        


        const el = document.getElementById('outputData')
el.innerHTML = `<a href="">${el.textContent}</a>`

        </script>
  </body>
</html>